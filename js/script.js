var ESC_KEYCODE=27,popupOpen=document.querySelector(".main-nav__order-button"),popup=document.querySelector(".popup"),popupClose=document.querySelector(".popup__close"),overlay=document.querySelector(".overlay"),nameField=document.querySelector("#name-popup"),onPopupEscPress=function(e){e.keyCode===ESC_KEYCODE&&closePopup()},openPopup=function(){popup.classList.add("popup-show"),nameField.focus(),document.addEventListener("keydown",onPopupEscPress)},closePopup=function(){popup.classList.remove("popup-show"),document.removeEventListener("keydown",onPopupEscPress)};popupOpen.addEventListener("click",function(){openPopup()}),popupClose.addEventListener("click",function(){closePopup()}),overlay.addEventListener("click",function(){closePopup()});for(var telInputs=document.querySelectorAll("input[type=tel]"),onTelInputValidate=function(e){this.setCustomValidity(""),this.validity.patternMismatch&&this.setCustomValidity("Введите телефон в формате: +7 (XXX) XXX XXXX")},setCursorPosition=function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},onTelInputMask=function(e){var t="+7 (___) ___ ____",n=0,o=t.replace(/\D/g,""),s=this.value.replace(/\D/g,"");o.length>=s.length&&(s=o),this.value=t.replace(/./g,function(e){return/[_\d]/.test(e)&&n<s.length?s.charAt(n++):n>=s.length?"":e}),"blur"==e.type?2==this.value.length&&(this.value=""):setCursorPosition(this.value.length,this)},i=0;i<telInputs.length;i++)telInputs[i].addEventListener("input",onTelInputValidate),telInputs[i].addEventListener("input",onTelInputMask),telInputs[i].addEventListener("focus",onTelInputMask),telInputs[i].addEventListener("blur",onTelInputMask);var TABLET_WIDTH=767,mapButton=document.querySelector(".footer__map h2"),contactsButton=document.querySelector(".footer__contacts h2"),onAccordionButtonPress=function(e){var t=this.nextElementSibling;this.classList.toggle("closed__info"),t.classList.toggle("hidden")};window.innerWidth<TABLET_WIDTH&&(mapButton.addEventListener("click",onAccordionButtonPress),contactsButton.addEventListener("click",onAccordionButtonPress)),window.addEventListener("resize",function(){window.innerWidth<TABLET_WIDTH?(mapButton.addEventListener("click",onAccordionButtonPress),contactsButton.addEventListener("click",onAccordionButtonPress)):(mapButton.removeEventListener("click",onAccordionButtonPress),contactsButton.removeEventListener("click",onAccordionButtonPress))});